<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lewis Hamilton | Portfolio</title>
    <script type="importmap">
        {
          "imports": {
            "three": "https://unpkg.com/three@latest/build/three.module.js"
          }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
        /* --- Staggered Menu CSS --- */
        .sm-scope .staggered-menu-wrapper { position: relative; width: 100%; height: 100%; z-index: 40; }
        .sm-scope .staggered-menu-header { position: absolute; top: 0; left: 0; width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 2rem; background: transparent; pointer-events: none; z-index: 20; }
        .sm-scope .staggered-menu-header > * { pointer-events: auto; }
        .sm-scope .sm-logo { display: flex; align-items: center; user-select: none; }
        .sm-scope .sm-logo a { font-family: "Righteous"; font-size: 2rem; color: inherit; text-decoration: none; text-transform: uppercase; }
        .sm-scope .sm-toggle { position: relative; display: inline-flex; align-items: center; gap: 0.3rem; background: transparent; border: none; cursor: pointer; color: #000; font-family: "DM Mono"; font-weight: 600; line-height: 1; overflow: visible; }
        .sm-scope .sm-toggle-textWrap { position: relative; margin-right: 0.5em; display: inline-block; height: 1em; overflow: hidden; white-space: nowrap; width: var(--sm-toggle-width, auto); min-width: var(--sm-toggle-width, auto); }
        .sm-scope .sm-toggle-textInner { display: flex; flex-direction: column; line-height: 1; }
        .sm-scope .sm-toggle-line { display: block; height: 1em; line-height: 1; }
        .sm-scope .sm-icon { position: relative; width: 14px; height: 14px; flex: 0 0 14px; display: inline-flex; align-items: center; justify-content: center; will-change: transform; }
        .sm-scope .sm-icon-line { position: absolute; left: 50%; top: 50%; width: 100%; height: 2px; background: currentColor; border-radius: 2px; transform: translate(-50%, -50%); will-change: transform; }
        .sm-scope .staggered-menu-panel { position: absolute; top: 0; right: 0; width: clamp(300px, 45vw, 500px); height: 100%; background: #ececec; display: flex; flex-direction: column; padding: 6em 2em 2em 2em; overflow-y: auto; z-index: 10; border-left: 1px solid rgba(0,0,0,0.1); }
        .sm-scope .sm-prelayers { position: absolute; top: 0; right: 0; bottom: 0; width: clamp(300px, 45vw, 500px); pointer-events: none; z-index: 5; }
        .sm-scope .sm-prelayer { position: absolute; top: 0; right: 0; height: 100%; width: 100%; transform: translateX(0); }
        .sm-scope .sm-panel-inner { flex: 1; display: flex; flex-direction: column; gap: 1rem; }
        .sm-scope .sm-panel-title { margin-bottom: 1rem; font-size: 0.75rem; font-weight: 600; color: #666; text-transform: uppercase; letter-spacing: 2px; }
        .sm-scope .sm-panel-list { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 0.25rem; }
        .sm-scope .sm-panel-itemWrap { position: relative; overflow: hidden; line-height: 1.2; padding: 0.5rem 0; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .sm-scope .sm-panel-item { position: relative; color: #000; font-weight: 600; font-size: 1.2rem; cursor: pointer; text-transform: uppercase; text-decoration: none; display: flex; justify-content: space-between; align-items: center; transition: color 0.3s; }
        .sm-scope .sm-panel-itemLabel { display: inline-block; will-change: transform; }
        .sm-scope .sm-panel-item:hover { color: #b9db1b; }
        .sm-scope .sm-rank { font-family: "DM Mono"; font-weight: 400; font-size: 1rem; color: #666; }
        .sm-scope .sm-trophy { font-size: 1.2rem; color: #000; }

        @media (max-width: 640px) { 
            .sm-scope .staggered-menu-panel { width: 100%; } 
            .sm-scope .sm-prelayers { width: 100%; }
        }
    </style>
    <div id="preloader">
        <div class="preloader-content">
            <h1 class="loader-text">Please wait..</h1>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- START STAGGERED MENU -->
    <div class="sm-scope" id="staggered-menu-root" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50;">
        <div class="staggered-menu-wrapper relative w-full h-full" style="--sm-accent: #b9db1b;" data-position="right">
            
            <div class="sm-prelayers">
                <div class="sm-prelayer" style="background: #292929;"></div>
                <div class="sm-prelayer" style="background: #b9db1b;"></div>
            </div>

            <header class="staggered-menu-header">
                <div class="sm-logo">
                    <a href="#">Lewis Hamilton</a>
                </div>

                <button class="sm-toggle" aria-label="Open menu" type="button" id="sm-toggle-btn">
                    <span class="sm-toggle-textWrap" aria-hidden="true">
                        <span class="sm-toggle-textInner" id="sm-text-inner">
                            <span class="sm-toggle-line">F1 RECORDS</span>
                            <span class="sm-toggle-line">CLOSE</span>
                        </span>
                    </span>

                    <span class="sm-icon" aria-hidden="true" id="sm-icon">
                        <span class="sm-icon-line" id="sm-plus-h"></span>
                        <span class="sm-icon-line" id="sm-plus-v" style="transform: translate(-50%, -50%) rotate(90deg);"></span>
                    </span>
                </button>
            </header>

            <aside id="staggered-menu-panel" class="staggered-menu-panel" aria-hidden="true">
                <div class="sm-panel-inner">
                    <h3 class="sm-panel-title">F1 Career Records</h3>
                    <ul class="sm-panel-list" role="list">
                        <!-- Records populated from most recent to oldest -->
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2025 - Ferrari</span>
                                <span class="sm-rank">6th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2024 - Mercedes</span>
                                <span class="sm-rank">7th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2023 - Mercedes</span>
                                <span class="sm-rank">3rd</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2022 - Mercedes</span>
                                <span class="sm-rank">6th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2021 - Mercedes</span>
                                <span class="sm-rank">2nd</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2020 - Mercedes</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2019 - Mercedes</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2018 - Mercedes</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2017 - Mercedes</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2016 - Mercedes</span>
                                <span class="sm-rank">2nd</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2015 - Mercedes</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2014 - Mercedes</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2013 - Mercedes</span>
                                <span class="sm-rank">4th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2012 - McLaren</span>
                                <span class="sm-rank">4th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2011 - McLaren</span>
                                <span class="sm-rank">5th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2010 - McLaren</span>
                                <span class="sm-rank">4th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2009 - McLaren</span>
                                <span class="sm-rank">5th</span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2008 - McLaren</span>
                                <span class="sm-trophy"><i class="fa-solid fa-trophy"></i></span>
                            </a>
                        </li>
                        <li class="sm-panel-itemWrap">
                            <a class="sm-panel-item" href="#">
                                <span class="sm-panel-itemLabel">2007 - McLaren</span>
                                <span class="sm-rank">2nd</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </aside>
        </div>
    </div>
    <!-- END STAGGERED MENU -->

    <section class="hero">
        <canvas></canvas>

        <div class="hero-footer">
            <div class="helmet-toggle-wrap">
                <span class="helmet-toggle-label">Switch mode</span>
                <div class="helmet-toggle">
                    <div class="helmet-icon active" id="helmet-with" data-helmet="with">
                        <img src="img/racing-helmet.svg" alt="With Helmet">
                    </div>
                    <div class="helmet-separator"></div>
                    <div class="helmet-icon" id="helmet-without" data-helmet="without">
                        <img src="img/no-entry.svg" alt="No Helmet">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Staggered Menu Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const config = {
                menuButtonColor: '#000',
                openMenuButtonColor: '#000',
                position: 'right'
            };

            const root = document.getElementById('staggered-menu-root');
            const toggleBtn = document.getElementById('sm-toggle-btn');
            const panel = document.getElementById('staggered-menu-panel');
            const preLayers = Array.from(document.querySelectorAll('.sm-prelayer'));
            const textInner = document.getElementById('sm-text-inner');
            const icon = document.getElementById('sm-icon');
            const plusH = document.getElementById('sm-plus-h');
            const plusV = document.getElementById('sm-plus-v');
            const wrapper = document.querySelector('.staggered-menu-wrapper');

            let isOpen = false;
            let isBusy = false;
            let openTl = null;

            function init() {
                const offscreen = config.position === 'left' ? -100 : 100;
                gsap.set([panel, ...preLayers], { xPercent: offscreen });
                gsap.set(plusH, { transformOrigin: '50% 50%', rotate: 0 });
                gsap.set(plusV, { transformOrigin: '50% 50%', rotate: 90 });
                gsap.set(icon, { rotate: 0, transformOrigin: '50% 50%' });
                gsap.set(textInner, { yPercent: 0 });
            }

            function buildOpenTimeline() {
                const itemLabels = Array.from(panel.querySelectorAll('.sm-panel-itemLabel'));
                const stats = Array.from(panel.querySelectorAll('.sm-rank, .sm-trophy'));
                
                const tl = gsap.timeline({ paused: true });

                preLayers.forEach((layer, i) => {
                    tl.fromTo(layer, { xPercent: 100 }, { xPercent: 0, duration: 0.5, ease: 'power4.out' }, i * 0.07);
                });

                tl.fromTo(panel, { xPercent: 100 }, { xPercent: 0, duration: 0.65, ease: 'power4.out' }, '-=0.4');

                if (itemLabels.length) {
                    tl.fromTo(itemLabels, 
                        { y: 20, opacity: 0 }, 
                        { y: 0, opacity: 1, duration: 0.5, stagger: 0.02, ease: 'power2.out' },
                        '-=0.3'
                    );
                }
                
                if (stats.length) {
                    tl.fromTo(stats,
                        { scale: 0, opacity: 0 },
                        { scale: 1, opacity: 1, duration: 0.4, stagger: 0.02, ease: 'back.out(1.7)' },
                        '-=0.4'
                    );
                }

                return tl;
            }

            function toggleMenu() {
                if (isBusy) return;
                isBusy = true;
                isOpen = !isOpen;

                if (isOpen) {
                    root.style.pointerEvents = 'auto';
                    wrapper.setAttribute('data-open', 'true');
                    openTl = buildOpenTimeline();
                    openTl.play().eventCallback('onComplete', () => { isBusy = false; });
                    
                    gsap.to(textInner, { yPercent: -50, duration: 0.5, ease: 'power4.out' });
                    gsap.to(plusH, { rotate: 45, duration: 0.5, ease: 'power4.out' });
                    gsap.to(plusV, { rotate: -45, duration: 0.5, ease: 'power4.out' });
                } else {
                    gsap.to([panel, ...preLayers], {
                        xPercent: 100,
                        duration: 0.4,
                        stagger: { each: 0.05, from: 'end' },
                        ease: 'power3.inOut',
                        onComplete: () => {
                            root.style.pointerEvents = 'none';
                            wrapper.removeAttribute('data-open');
                            isBusy = false;
                        }
                    });

                    gsap.to(textInner, { yPercent: 0, duration: 0.5, ease: 'power4.out' });
                    gsap.to(plusH, { rotate: 0, duration: 0.5, ease: 'power4.out' });
                    gsap.to(plusV, { rotate: 90, duration: 0.5, ease: 'power4.out' });
                }
            }

            toggleBtn.addEventListener('click', toggleMenu);
            init();
        });
    </script>

    <script type="module" src="script.js"></script>
</body>
</html>